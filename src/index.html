<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Testing WhatsApp-customMessage-API</title>
	<style>
		fieldset{
			width: 75%;
			margin: 0 auto;
		}
	</style>
</head>
<body>
	<fieldset>
		<legend><h3>Crear Link</h3></legend>
		<form action="">
			<div class="form-group">
				<label for="WA-code">Código de País</label><br>
				<input id="WA-code" type="number" max="999" min="0" placeholder="Example: 58" style="width: 100px">
			</div>
			<div class="form-group">
				<label for="WA-phone">Número de teléfono (sin cero al final)</label><br>
				<input id="WA-phone" type="text" name="WA-phone" maxlength="10" placeholder="Example: 4321098765">
			</div>
			<div>
				<label for="WA-text">Mensaje (opcional)</label><br>
				<textarea name="WA-text" id="WA-text"></textarea>
			</div>
			<div>
				<button type="submit" id="WA-submit" data-type="create">Generar link</button>
			</div>
		</form>
			<textarea name="WA-result" id="WA-result" rows="10"></textarea>
	</fieldset>

	<!-- Calling API library -->
	<script src="wa-custom.js"></script>
	<script>
		// Code to initialize API & use it
		"use strict"
		const WAForm = {
			code: document.getElementById('WA-code'),
			phone: document.getElementById('WA-phone'),
			text: document.getElementById('WA-text'),
			submit: document.getElementById('WA-submit'),
			result: document.getElementById('WA-result'),
		}
		console.log(WAForm);
		WAForm.submit.addEventListener('click', (parent) => {
			event.preventDefault();
			var WAInfo = {};
			for (let element in WAForm) {
				switch (element){
					case 'submit': break;
					case 'result': break;
					case 'text':
						WAInfo[element] = WAForm[element].value;
						break;
					default:
						WAInfo[element] = Number(WAForm[element].value);
				}
			}
			const WAObject = new CustomWA(WAInfo['code'], WAInfo['phone']);
			WAForm.result.innerText = WAObject.createLink(WAInfo['text']);
		});
	</script>
</body>
</html>